(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3490:(e,r,t)=>{"use strict";t.d(r,{default:()=>J});var s=t(5155),a=t(2115),i=t(221),n=t(2177),o=t(5594),l=t(9708),d=t(2085),c=t(9434);let u=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:n=!1,...o}=e,d=n?l.DX:"button";return(0,s.jsx)(d,{className:(0,c.cn)(u({variant:a,size:i,className:t})),ref:r,...o})});m.displayName="Button";let f=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});f.displayName="Card";let p=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",t),...a})});p.displayName="CardHeader";let h=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});h.displayName="CardTitle";let x=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,c.cn)("text-sm text-muted-foreground",t),...a})});x.displayName="CardDescription";let g=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,c.cn)("p-6 pt-0",t),...a})});g.displayName="CardContent";let b=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,c.cn)("flex items-center p-6 pt-0",t),...a})});b.displayName="CardFooter";let v=a.forwardRef((e,r)=>{let{className:t,type:a,...i}=e;return(0,s.jsx)("input",{type:a,className:(0,c.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...i})});v.displayName="Input";var y=t(968);let N=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(y.b,{ref:r,className:(0,c.cn)(N(),t),...a})});j.displayName=y.b.displayName;var w=t(7484),S=t(518);let E=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(w.bL,{ref:r,className:(0,c.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,s.jsx)(w.C1,{className:(0,c.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(S.A,{className:"h-4 w-4"})})})});E.displayName=w.bL.displayName;let k=(0,d.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),O=a.forwardRef((e,r)=>{let{className:t,variant:a,...i}=e;return(0,s.jsx)("div",{ref:r,role:"alert",className:(0,c.cn)(k({variant:a}),t),...i})});O.displayName="Alert";let X=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h5",{ref:r,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})});X.displayName="AlertTitle";let B=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",t),...a})});B.displayName="AlertDescription";let T=n.Op,C=a.createContext({}),A=e=>{let{...r}=e;return(0,s.jsx)(C.Provider,{value:{name:r.name},children:(0,s.jsx)(n.xI,{...r})})},_=()=>{let e=a.useContext(C),r=a.useContext(I),{getFieldState:t,formState:s}=(0,n.xW)(),i=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...i}},I=a.createContext({}),P=a.forwardRef((e,r)=>{let{className:t,...i}=e,n=a.useId();return(0,s.jsx)(I.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:r,className:(0,c.cn)("space-y-2",t),...i})})});P.displayName="FormItem";let R=a.forwardRef((e,r)=>{let{className:t,...a}=e,{error:i,formItemId:n}=_();return(0,s.jsx)(j,{ref:r,className:(0,c.cn)(i&&"text-destructive",t),htmlFor:n,...a})});R.displayName="FormLabel";let F=a.forwardRef((e,r)=>{let{...t}=e,{error:a,formItemId:i,formDescriptionId:n,formMessageId:o}=_();return(0,s.jsx)(l.DX,{ref:r,id:i,"aria-describedby":a?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!a,...t})});F.displayName="FormControl";let z=a.forwardRef((e,r)=>{let{className:t,...a}=e,{formDescriptionId:i}=_();return(0,s.jsx)("p",{ref:r,id:i,className:(0,c.cn)("text-sm text-muted-foreground",t),...a})});z.displayName="FormDescription";let D=a.forwardRef((e,r)=>{var t;let{className:a,children:i,...n}=e,{error:o,formMessageId:l}=_(),d=o?String(null!==(t=null==o?void 0:o.message)&&void 0!==t?t:""):i;return d?(0,s.jsx)("p",{ref:r,id:l,className:(0,c.cn)("text-sm font-medium text-destructive",a),...n,children:d}):null});D.displayName="FormMessage";var q=t(172),W=t(5121);let M=["Bean & Cheese Burrito","Beef & Bean Burrito","Burrito of the Week*"],V=o.z.object({name:o.z.string().min(1,"Name is required"),email:o.z.string().email("Invalid email address").optional().or(o.z.literal("")),phoneNumber:o.z.string().min(1,"Phone number is required").regex(/^\+1\d{10}$/,"Phone number must be in +1XXXXXXXXXX format."),burritoOrders:o.z.record(o.z.enum(M),o.z.number().min(1,"Quantity must be at least 1")).refine(e=>Object.keys(e).length>0,{message:"Please select at least one burrito."})});async function $(e,r){let t={name:r.get("name"),email:r.get("email"),phoneNumber:r.get("phoneNumber"),burritoOrders:{}};for(let e of M){let s="quantity-".concat(e);if(r.has(s)){let a=r.get(s);a&&Number(a)>0&&(t.burritoOrders[e]=Number(a))}}let s=V.safeParse(t);if(!s.success){console.log("Validation Errors:",s.error.flatten().fieldErrors);let e=s.error.flatten().fieldErrors,r={};return e.name&&(r.name=e.name),e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber),e.burritoOrders&&(r.burritoOrders=e.burritoOrders),s.error.formErrors.length>0&&(r._form=s.error.formErrors),{message:"Validation failed. Please check your entries.",errors:r,success:!1}}let{name:a,email:i,phoneNumber:n,burritoOrders:o}=s.data;try{if(!(await fetch("/api/submit-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:i||void 0,phoneNumber:n,burritoOrders:o})})).ok)throw Error("Failed to submit order to API");return{message:"Order submitted successfully!",success:!0}}catch(r){console.error("Submission Error:",r);let e="An unexpected error occurred during submission.";return r instanceof Error&&(e="Submission failed: ".concat(r.message)),{message:e,errors:{_form:[e]},success:!1}}}var L=t(7481);let Q=o.z.object({name:o.z.string().min(1,"Name is required"),email:o.z.string().email("Invalid email address").optional().or(o.z.literal("")),phoneNumber:o.z.string().min(1,"Phone number is required").regex(/^\+1\d{10}$/,"Phone number must be in +1XXXXXXXXXX format."),selectedBurritos:o.z.array(o.z.string()).min(1,"Please select at least one burrito.")}),U=["Bean & Cheese Burrito - $5","Beef & Bean Burrito - $6","Burrito of the Week* - $10"];function H(e){let{isPending:r}=e;return(0,s.jsxs)(m,{type:"submit",disabled:r,className:"w-full bg-accent hover:bg-accent/90 text-accent-foreground","aria-live":"polite",children:[r?(0,s.jsx)(q.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(W.A,{className:"mr-2 h-4 w-4"}),r?"Submitting...":"Place Order"]})}let G=e=>{if(!e)return"";let r=e.replace(/[^\d+]/g,"");r.startsWith("+")?r.length>1&&!r.startsWith("+1")&&(r="+1"+r.substring(1)):r.length>0&&(r=r.startsWith("1")&&r.length>1?"+"+r:"+1"+r);let t=r.match(/^(\+1\d{0,10}).*$/);return t?t[1]:"+"===r?"+":"+1"===r&&e.length<=2?"+1":e};function J(){var e,r;let[t,o]=(0,a.useActionState)($,{message:"",success:!1}),[l,d]=(0,a.useTransition)(),{toast:c}=(0,L.dj)(),u=(0,n.mN)({resolver:(0,i.u)(Q),defaultValues:{name:"",email:"",phoneNumber:"",selectedBurritos:[]},mode:"onChange"}),m=(0,n.FH)({control:u.control,name:"selectedBurritos"})||[],[y,N]=a.useState({}),w=(0,a.useRef)();(0,a.useEffect)(()=>{let e=m||[];((e,r)=>{if(e.length!==r.length)return!1;let t=[...e].sort(),s=[...r].sort();for(let e=0;e<t.length;e++)if(t[e]!==s[e])return!1;return!0})(e,w.current||[])||N(r=>{let t={};return e.forEach(e=>{t[e]=r[e]||1}),t}),w.current=e},[m]);let S=(e,r)=>{let t=parseInt(r,10),s=isNaN(t)||t<1?1:t;N(r=>({...r,[e]:s}))};(0,a.useEffect)(()=>{if(null==t?void 0:t.success)c({title:"Success!",description:t.message}),u.reset(),N({});else if((null==t?void 0:t.message)&&!t.success&&""!==t.message){var e,r,s,a;c({variant:"destructive",title:"Submission Error",description:(null===(r=t.errors)||void 0===r?void 0:null===(e=r._form)||void 0===e?void 0:e[0])||(null===(a=t.errors)||void 0===a?void 0:null===(s=a.burritoOrders)||void 0===s?void 0:s[0])||t.message}),t.errors&&(t.errors.name&&u.setError("name",{type:"server",message:t.errors.name[0]}),t.errors.email&&u.setError("email",{type:"server",message:t.errors.email[0]}),t.errors.phoneNumber&&u.setError("phoneNumber",{type:"server",message:t.errors.phoneNumber[0]}),t.errors.burritoOrders&&u.setError("selectedBurritos",{type:"server",message:t.errors.burritoOrders[0]}))}},[t,c,u]);let k=m.length>0;return(0,s.jsxs)(f,{className:"w-full max-w-lg shadow-lg",children:[(0,s.jsxs)(p,{children:[(0,s.jsx)(h,{className:"text-2xl font-bold text-center text-primary",children:"Burrito Order Form"}),(0,s.jsx)(x,{className:"text-center text-muted-foreground mb-4",children:"Tell us what you'd like to order!"}),(0,s.jsxs)("div",{className:"text-center border-t border-border pt-4",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Burrito of the Week"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-primary tracking-tight mt-1",children:"Mojo Lime Shredded Pork Burrito w/ Smoky Corn Salsa & Avocado Crema"})]})]}),(0,s.jsx)(T,{...u,children:(0,s.jsxs)("form",{onSubmit:u.handleSubmit(e=>{let r=new FormData;r.append("name",e.name),e.email&&r.append("email",e.email),r.append("phoneNumber",e.phoneNumber);let t=!1;if(e.selectedBurritos.forEach(e=>{let s=y[e]||0;if(s>0){let a=e.split(" - ")[0];r.append("quantity-".concat(a),String(s)),t=!0}}),!t&&e.selectedBurritos.length>0){u.setError("selectedBurritos",{type:"manual",message:"Please specify a quantity for selected burritos."}),c({variant:"destructive",title:"Validation Error",description:"Please specify a quantity for selected burritos."});return}d(()=>{o(r)})},e=>{let r=Object.keys(e)[0];r&&e[r].message?c({variant:"destructive",title:"Validation Error",description:String(e[r].message)}):c({variant:"destructive",title:"Validation Error",description:"Please check the form for errors."})}),className:"space-y-0",children:[(0,s.jsxs)(g,{className:"space-y-6",children:[(0,s.jsx)(A,{control:u.control,name:"name",render:e=>{let{field:r}=e;return(0,s.jsxs)(P,{children:[(0,s.jsxs)(R,{children:["Name ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(F,{children:(0,s.jsx)(v,{placeholder:"Your Name",...r,"aria-required":"true"})}),(0,s.jsx)(D,{})]})}}),(0,s.jsx)(A,{control:u.control,name:"email",render:e=>{let{field:r}=e;return(0,s.jsxs)(P,{children:[(0,s.jsx)(R,{children:"Email (Optional)"}),(0,s.jsx)(F,{children:(0,s.jsx)(v,{type:"email",placeholder:"your.email@example.com",...r})}),(0,s.jsx)(z,{children:"I'll use this to tell you about future burritos, no spam I promise."}),(0,s.jsx)(D,{})]})}}),(0,s.jsx)(A,{control:u.control,name:"phoneNumber",render:e=>{let{field:r}=e;return(0,s.jsxs)(P,{children:[(0,s.jsxs)(R,{children:["Phone Number ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(F,{children:(0,s.jsx)(v,{type:"tel",placeholder:"+1234567890",...r,onChange:e=>{let t=G(e.target.value);r.onChange(t)},"aria-required":"true"})}),(0,s.jsx)(z,{children:"Used to tell you when your order is ready for pickup. Must be a US number in the format +1XXXXXXXXXX."}),(0,s.jsx)(D,{})]})}}),(0,s.jsx)(A,{control:u.control,name:"selectedBurritos",render:e=>{var r;let{field:{onChange:t,value:a,...i}}=e;return(0,s.jsxs)(P,{children:[(0,s.jsxs)(R,{children:["Which Burrito(s)?"," ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(F,{children:(0,s.jsx)("div",{className:"space-y-3",children:U.map(e=>{let r="checkbox-".concat(e.replace(/\W/g,"-")),n=null==a?void 0:a.includes(e);return(0,s.jsxs)("div",{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,s.jsx)(E,{id:r,checked:n,onCheckedChange:r=>{let s;let i=a||[];t(r?[...i,e]:i.filter(r=>r!==e)),u.trigger("selectedBurritos")},"aria-labelledby":"label-".concat(e.replace(/\W/g,"-")),...i}),(0,s.jsx)(j,{htmlFor:r,id:"label-".concat(e.replace(/\W/g,"-")),className:"font-normal cursor-pointer",children:e})]},e)})})}),(0,s.jsx)(D,{children:null===(r=u.formState.errors.selectedBurritos)||void 0===r?void 0:r.message})]})}}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground mt-2",children:"*Burrito of the Week Price will vary weekly based on ingredient cost."}),k&&(0,s.jsxs)("div",{className:"space-y-4 pt-4 border-t border-border transition-all duration-300 ease-in-out",children:[(0,s.jsx)("h3",{className:"text-md font-semibold text-primary",children:"Quantity"}),m.map(e=>{let r=y[e]||1;return(0,s.jsxs)("div",{className:"flex items-center justify-between space-x-4 animate-in fade-in duration-500",children:[(0,s.jsx)(j,{htmlFor:"quantity-input-".concat(e.replace(/\W/g,"-")),className:"flex-1",children:e}),(0,s.jsx)(v,{id:"quantity-input-".concat(e.replace(/\W/g,"-")),type:"number",min:"1",value:r,onChange:r=>S(e,r.target.value),className:"w-20","aria-label":"Quantity for ".concat(e.split(" - ")[0]),required:!0})]},"quantity-".concat(e))}),(null==t?void 0:null===(e=t.errors)||void 0===e?void 0:e.burritoOrders)&&!u.formState.errors.selectedBurritos&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:t.errors.burritoOrders[0]})]}),(null==t?void 0:null===(r=t.errors)||void 0===r?void 0:r._form)&&(0,s.jsxs)(O,{variant:"destructive",className:"mt-4",children:[(0,s.jsx)(X,{children:"Server Error"}),(0,s.jsx)(B,{children:t.errors._form[0]})]})]}),(0,s.jsx)(b,{children:(0,s.jsx)(H,{isPending:u.formState.isSubmitting||l})})]})})]})}},7481:(e,r,t)=>{"use strict";t.d(r,{dj:()=>m});var s=t(2115);let a=0,i=new Map,n=e=>{if(i.has(e))return;let r=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,r)},o=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...r}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,r]=s.useState(d);return s.useEffect(()=>(l.push(r),()=>{let e=l.indexOf(r);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8762:(e,r,t)=>{Promise.resolve().then(t.bind(t,3490))},9434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var s=t(2596),a=t(9688);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[61,308,441,684,358],()=>r(8762)),_N_E=e.O()}]);